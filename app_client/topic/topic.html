<main-header></main-header>
<div class="row">
    <div class="col-md-12 col-xs-12">
        <div class="box box-primary">
            <div class="box-header topictype">
                <a ng-repeat="item in vm.typeArr" ng-click="vm.selectTypeFn(item)"
                   ng-class="{true: 'label label-info', false: ''}[vm._selected === item]">{{item}}</a>
                <div class="pull-right" >
                    <div ng-if="vm.isLoggedIn">
                        <label ng-click="vm.createPost()"  class="btn btn-info">发帖</label>
                    </div>
                    <div ng-if="!vm.isLoggedIn">
                        <a href="/#/login?page={{vm.currentPath}}" class="btn btn-primary">登录可发帖</a>
                    </div>
                </div>
            </div>
            <div class="box-body">
                <div class="error">{{vm.message}}</div>
                <div class="row topiclist" ng-repeat='topic in vm.topicList'>
                    <img ng-src='{{topic.userImg}}'><span class="count">{{topic.commentCount}}/{{topic.visitedCount}}</span>
                    <a class="label label-info" href="#/topic/{{topic._id}}">{{topic.type}}</a>&nbsp;&nbsp;《{{topic.title}}》
                    <span class="pull-right">{{topic.createdOn | formatDate}}</span>
                    <a href="#/personal/{{topic.userId}}" class="pull-right author">{{topic.userName}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<main-footer></main-footer>
